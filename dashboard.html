<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>BodyFit — MVP</title>
<!-- Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  :root{
    --bg:#0b0f12;
    --panel:#0f1417;
    --accent:#00ffd5; /* LED */
    --accent-2:#7cf2ff;
    --muted:#98a0a6;
    --glass: rgba(255,255,255,0.03);
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  html,body{height:100%;margin:0;background:linear-gradient(180deg,#050608,#0b0f12);color:#e6f7f5}
  .app{
    max-width:1100px;margin:28px auto;padding:20px;border-radius:16px;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
    box-shadow: 0 6px 30px rgba(0,0,0,0.6);
    border:1px solid rgba(0,255,213,0.04);
  }
  header{display:flex;align-items:center;justify-content:space-between;gap:20px}
  .brand{display:flex;align-items:center;gap:12px}
  .logo{
    width:54px;height:54px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent-2));
    box-shadow:0 4px 18px rgba(0,255,213,0.14), inset 0 -6px 20px rgba(0,0,0,0.4);
    display:flex;align-items:center;justify-content:center;font-weight:800;color:#021012;
  }
  h1{font-size:20px;margin:0}
  nav{display:flex;gap:10px}
  .btn{
    padding:8px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.00));cursor:pointer;color:var(--accent-2);
    font-weight:600;
  }
  main{display:grid;grid-template-columns: 1fr 360px;gap:20px;margin-top:18px}
  .card{background:var(--panel);border-radius:12px;padding:16px;border:1px solid rgba(255,255,255,0.03)}
  .led{
    height:10px;width:10px;border-radius:50%;background:var(--accent);box-shadow:0 0 12px var(--accent);
  }
  .dashboard-top{display:flex;gap:12px;align-items:center}
  .stat{flex:1;padding:12px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);border:1px solid rgba(255,255,255,0.02)}
  .list{max-height:300px;overflow:auto;padding-right:8px}
  form{display:flex;flex-direction:column;gap:8px}
  input,select,textarea{background:var(--glass);border:1px solid rgba(255,255,255,0.03);padding:10px;border-radius:8px;color:#dffaf6}
  label{font-size:13px;color:var(--muted)}
  .small{font-size:13px;color:var(--muted)}
  footer{margin-top:16px;text-align:center;color:var(--muted);font-size:13px}
  /* responsive */
  @media (max-width:900px){
    main{grid-template-columns:1fr}
    .brand h1{display:none}
  }
</style>
</head>
<body>
  <div class="app" id="app">
    <header>
      <div class="brand">
        <div class="logo">BF</div>
        <div>
          <h1>BodyFit — Dashboard</h1>
          <div class="small">Prototipo | Estilo: Robótico · LEDs</div>
        </div>
      </div>
      <nav>
        <button class="btn" data-view="dashboard">Dashboard</button>
        <button class="btn" data-view="routines">Rutinas</button>
        <button class="btn" data-view="log">Registrar sesión</button>
        <button class="btn" id="logoutBtn">Salir</button>
      </nav>
    </header>

    <main>
      <section id="mainView">
        <!-- Dashboard -->
        <div class="card" id="dashboardView">
          <div class="dashboard-top">
            <div style="display:flex;gap:12px;align-items:center">
              <div class="led"></div>
              <div><strong id="welcomeName">Hola, Usuario</strong><div class="small">Última sesión: <span id="lastSession">—</span></div></div>
            </div>
            <div style="margin-left:auto">
              <div class="small">Métrica rápida</div>
              <div style="font-weight:700">IMC: <span id="imcVal">--</span></div>
            </div>
          </div>

          <div style="margin-top:12px;display:grid;grid-template-columns:repeat(3,1fr);gap:12px">
            <div class="stat">
              <div class="small">Sesiones / mes</div>
              <div style="font-size:20px" id="sessionsMonth">0</div>
            </div>
            <div class="stat">
              <div class="small">Progreso fuerza</div>
              <div style="font-size:20px" id="strengthProgress">0%</div>
            </div>
            <div class="stat">
              <div class="small">Cumplimiento</div>
              <div style="font-size:20px" id="compliance">0%</div>
            </div>
          </div>

          <div style="margin-top:18px">
            <canvas id="progressChart" height="120"></canvas>
          </div>

          <div style="margin-top:12px;display:flex;gap:12px">
            <div style="flex:1" class="card">
              <div style="font-weight:700">Rutinas recientes</div>
              <div class="list" id="recentRoutines"></div>
            </div>
            <div style="width:260px" class="card">
              <div style="font-weight:700">Métricas</div>
              <div class="small">Peso: <span id="peso">--</span> kg</div>
              <div class="small">Altura: <span id="altura">--</span> cm</div>
            </div>
          </div>
        </div>

        <!-- Rutinas -->
        <div class="card" id="routinesView" style="display:none">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div style="font-weight:700">Rutinas</div>
            <button class="btn" id="newRoutineBtn">+ Nueva</button>
          </div>
          <div style="margin-top:12px">
            <div id="routinesList" class="list"></div>
          </div>
        </div>

        <!-- Log session -->
        <div class="card" id="logView" style="display:none">
          <div style="font-weight:700">Registrar sesión</div>
          <form id="logForm" style="margin-top:10px">
            <label>Fecha
              <input type="date" id="sessionDate" required />
            </label>
            <label>Rutina
              <select id="selectRoutine"></select>
            </label>
            <label>Notas
              <textarea id="sessionNotes" rows="3"></textarea>
            </label>
            <button class="btn" type="submit">Guardar sesión</button>
          </form>
        </div>
      </section>

      <aside>
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div><strong>Perfil</strong></div>
            <div class="small">Pro</div>
          </div>
          <div style="margin-top:8px">
            <div class="small">Nombre</div>
            <div id="profileName">Usuario demo</div>
            <div class="small" style="margin-top:8px">Objetivo</div>
            <div id="profileGoal">Mantener / ganar masa</div>
          </div>
        </div>

        <div class="card" style="margin-top:12px">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div><strong>Atajos</strong></div>
            <div class="small">Modo</div>
          </div>
          <div style="margin-top:10px;display:flex;flex-direction:column;gap:8px">
            <button class="btn" id="exportCsv">Exportar CSV</button>
            <button class="btn" id="importDemo">Importar demo</button>
          </div>
        </div>
      </aside>
    </main>

    <footer>
      BodyFit · MVP — diseño robótico con LEDs · copy/paste listo
    </footer>
  </div>

<script>
/* Frontend SPA logic (demo, sin backend real) */
const state = {
  user: { name: 'David', peso: 72, altura: 175 },
  routines: [
    { id:1, name:'Full Body 3x/sem', exercises:['Sentadillas','Press banca','Remo'] },
    { id:2, name:'Fuerza piernas', exercises:['Sentadillas pesadas','Peso muerto'] }
  ],
  sessions: [
    { date:'2025-11-12', routineId:1, notes:'Buena sesión', sets:[] },
    { date:'2025-11-10', routineId:2, notes:'Subida de carga', sets:[] }
  ]
};

function $(sel){return document.querySelector(sel)}
function renderProfile(){
  $('#profileName').textContent = state.user.name;
  $('#peso').textContent = state.user.peso;
  $('#altura').textContent = state.user.altura;
  $('#welcomeName').textContent = `Hola, ${state.user.name}`;
  const imc = (state.user.peso / Math.pow(state.user.altura/100,2)).toFixed(1);
  $('#imcVal').textContent = imc;
}
function renderRoutines(){
  const container = $('#routinesList'); container.innerHTML='';
  state.routines.forEach(r=>{
    const el = document.createElement('div');
    el.style.padding='8px'; el.style.borderBottom='1px solid rgba(255,255,255,0.02)';
    el.innerHTML = `<div style="display:flex;justify-content:space-between;align-items:center">
      <div><strong>${r.name}</strong><div class="small">${r.exercises.join(' · ')}</div></div>
      <div><button class="btn" data-id="${r.id}" onclick="deleteRoutine(${r.id})">Eliminar</button></div>
    </div>`;
    container.appendChild(el);
  });
  // populate select
  const sel = $('#selectRoutine'); sel.innerHTML='';
  state.routines.forEach(r=> sel.innerHTML += `<option value="${r.id}">${r.name}</option>`);
}
function renderRecent(){
  $('#recentRoutines').innerHTML = state.sessions.slice(0,5).map(s=>{
    const r = state.routines.find(x=>x.id===s.routineId) || {name:'—'};
    return `<div style="padding:8px;border-bottom:1px solid rgba(255,255,255,0.02)"><div style="font-weight:700">${r.name}</div><div class="small">${s.date} · ${s.notes}</div></div>`;
  }).join('');
  $('#lastSession').textContent = state.sessions[0]?.date || '—';
  $('#sessionsMonth').textContent = state.sessions.length;
  $('#strengthProgress').textContent = '12%';
  $('#compliance').textContent = '78%';
}

window.deleteRoutine = (id) => {
  state.routines = state.routines.filter(r=> r.id !== id);
  renderRoutines(); renderRecent();
};

document.getElementById('newRoutineBtn').addEventListener('click', ()=>{
  const name = prompt('Nombre de la rutina');
  const ex = prompt('Ejercicios (separados por coma)');
  if(name && ex){
    const newR = { id: Date.now(), name, exercises: ex.split(',').map(s=>s.trim())};
    state.routines.unshift(newR);
    renderRoutines();
  }
});

document.getElementById('logForm').addEventListener('submit', (ev)=>{
  ev.preventDefault();
  const date = $('#sessionDate').value || new Date().toISOString().slice(0,10);
  const routineId = parseInt($('#selectRoutine').value);
  const notes = $('#sessionNotes').value;
  state.sessions.unshift({ date, routineId, notes, sets:[] });
  renderRecent();
  alert('Sesión guardada (demo local)');
  ev.target.reset();
});

$('#importDemo').addEventListener('click', ()=>{
  alert('Import demo → datos cargados');
  renderRoutines(); renderRecent();
});

$('#exportCsv').addEventListener('click', ()=>{
  const rows = [['date','routine','notes'], ...state.sessions.map(s=>[s.date, (state.routines.find(r=>r.id===s.routineId)||{name:''}).name, s.notes])];
  const csv = rows.map(r=>r.map(v=>`"${String(v).replace(/"/g,'""')}"`).join(',')).join('\\n');
  const blob = new Blob([csv], {type:'text/csv'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url; a.download = 'sessions.csv'; a.click();
  URL.revokeObjectURL(url);
});

document.querySelectorAll('nav .btn[data-view]').forEach(b=>{
  b.addEventListener('click', ()=> {
    const view = b.getAttribute('data-view');
    ['dashboard','routines','log'].forEach(v=> document.getElementById(v+'View').style.display = v===view? 'block':'none');
  });
});

// Chart
function renderChart(){
  const ctx = document.getElementById('progressChart').getContext('2d');
  const labels = state.sessions.slice(0,8).map(s=>s.date).reverse();
  const data = state.sessions.slice(0,8).map((_,i)=> 40 + i*3).reverse();
  new Chart(ctx, {
    type:'line',
    data:{ labels, datasets:[{ label:'Performance', data, tension:0.3, fill:true, borderWidth:2 }]},
    options:{ plugins:{ legend:{ display:false }}, scales:{ y:{ beginAtZero:false } } }
  });
}

function init(){
  renderProfile(); renderRoutines(); renderRecent(); renderChart();
  // defaults
  $('#sessionDate').value = new Date().toISOString().slice(0,10);
}
init();
</script>
</body>
</html>
